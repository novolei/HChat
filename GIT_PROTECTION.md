# ğŸ›¡ï¸ HChat iOS Git ä¿æŠ¤æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨ Git å·¥å…·ä¿æŠ¤ HChat iOS ä»£ç ï¼Œé˜²æ­¢æ„å¤–ä¸¢å¤±ã€‚

---

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å·¥å…·è¯´æ˜](#å·¥å…·è¯´æ˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [å¸¸è§åœºæ™¯](#å¸¸è§åœºæ™¯)
- [æ•…éšœæ¢å¤](#æ•…éšœæ¢å¤)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

```bash
chmod +x git-backup.sh quick-save.sh
```

### 2ï¸âƒ£ æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# å¼€å§‹å·¥ä½œå‰ - å¿«é€Ÿä¿å­˜å½“å‰çŠ¶æ€
./quick-save.sh "å¼€å§‹å¼€å‘æ–°åŠŸèƒ½"

# åšä¸€äº›ä»£ç æ”¹åŠ¨...
# ç¼–è¾‘ HChat/Core/HackChatClient.swift
# ç¼–è¾‘ HChat/UI/ChatView.swift

# å®Œæˆé˜¶æ®µæ€§å·¥ä½œ - æ­£å¼æäº¤
./git-backup.sh "ä¿®å¤ WebSocket è¿æ¥é—®é¢˜"

# ç»§ç»­å·¥ä½œ...

# ä¸´æ—¶ä¿å­˜è¿›åº¦ï¼ˆä¸ç¡®å®šæ˜¯å¦è¦æäº¤ï¼‰
./quick-save.sh "æµ‹è¯•ä¸­çš„æ”¹åŠ¨"
```

---

## ğŸ”§ å·¥å…·è¯´æ˜

### ğŸ“¦ `git-backup.sh` - æ­£å¼å¤‡ä»½å·¥å…·

**ç”¨é€”ï¼š** å°†æ”¹åŠ¨æ­£å¼æäº¤åˆ° Git å†å²è®°å½•

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# äº¤äº’å¼å¤‡ä»½ï¼ˆä¼šè¯¢é—®ç¡®è®¤ï¼‰
./git-backup.sh

# å¸¦è‡ªå®šä¹‰æ¶ˆæ¯
./git-backup.sh "ä¿®å¤äº†ç™»å½•é¡µé¢çš„ UI é—®é¢˜"
```

**åŠŸèƒ½ï¼š**
- âœ… æ˜¾ç¤ºæ‰€æœ‰æ”¹åŠ¨æ–‡ä»¶
- âœ… è‡ªåŠ¨ç”Ÿæˆæäº¤æ¶ˆæ¯ï¼ˆåŒ…å«æ—¶é—´æˆ³å’Œç»Ÿè®¡ï¼‰
- âœ… è‡ªåŠ¨æ’é™¤ HCChatBackEnd ç‹¬ç«‹ä»“åº“
- âœ… ç¡®è®¤åæäº¤åˆ° Git å†å²
- âœ… æ˜¾ç¤ºæœ€è¿‘ 3 æ¬¡æäº¤

**é€‚ç”¨åœºæ™¯ï¼š**
- å®Œæˆä¸€ä¸ªåŠŸèƒ½æˆ–ä¿®å¤
- ä»£ç å¯ä»¥æ­£å¸¸ç¼–è¯‘è¿è¡Œ
- æƒ³è¦åˆ›å»ºä¸€ä¸ªæ­£å¼çš„ç‰ˆæœ¬è®°å½•ç‚¹

---

### ğŸ’¾ `quick-save.sh` - å¿«é€Ÿä¿å­˜å·¥å…·

**ç”¨é€”ï¼š** ä¸´æ—¶ä¿å­˜æ”¹åŠ¨åˆ° `git stash`ï¼ˆä¸å½±å“ Git å†å²ï¼‰

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# å¿«é€Ÿä¿å­˜ï¼ˆé»˜è®¤æè¿°ï¼‰
./quick-save.sh

# å¸¦è‡ªå®šä¹‰æè¿°
./quick-save.sh "æµ‹è¯•æ–°çš„åŠ å¯†æ–¹æ¡ˆ"
```

**åŠŸèƒ½ï¼š**
- âœ… ä¿å­˜æ‰€æœ‰æ”¹åŠ¨ï¼ˆåŒ…æ‹¬æœªè·Ÿè¸ªæ–‡ä»¶ï¼‰
- âœ… ä¸åˆ›å»ºæäº¤è®°å½•
- âœ… å¯ä»¥éšæ—¶æ¢å¤
- âœ… æ”¯æŒå¤šä¸ªä¿å­˜ç‚¹

**é€‚ç”¨åœºæ™¯ï¼š**
- ä¸´æ—¶åˆ‡æ¢åˆ†æ”¯
- æµ‹è¯•æ€§æ”¹åŠ¨ï¼ˆä¸ç¡®å®šæ˜¯å¦ä¿ç•™ï¼‰
- å¿«é€Ÿæ¸…ç©ºå·¥ä½œåŒº
- åˆ›å»º"æ—¶å…‰å­˜æ¡£"ä»¥ä¾¿å›æ»š

**æ¢å¤æ–¹æ³•ï¼š**
```bash
# æ¢å¤æœ€è¿‘ä¸€æ¬¡ä¿å­˜
git stash pop

# æŸ¥çœ‹æ‰€æœ‰ä¿å­˜ç‚¹
git stash list

# æ¢å¤ç‰¹å®šä¿å­˜ç‚¹
git stash apply stash@{1}

# åˆ é™¤ä¿å­˜ç‚¹
git stash drop stash@{0}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å·¥ä½œå‰å…ˆä¿å­˜

```bash
# æ¯æ¬¡å¼€å§‹æ–°ä»»åŠ¡å‰ï¼Œä¿å­˜å½“å‰çŠ¶æ€
./quick-save.sh "å¼€å§‹å‰çš„çŠ¶æ€"

# ç„¶åå¼€å§‹ç¼–ç 
```

**å¥½å¤„ï¼š** å¦‚æœæ–°æ”¹åŠ¨ä¸æ»¡æ„ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šåˆ°èµ·ç‚¹

---

### 2. é˜¶æ®µæ€§æäº¤

```bash
# æ¯å®Œæˆä¸€ä¸ªå°åŠŸèƒ½ï¼Œå°±æäº¤ä¸€æ¬¡
./git-backup.sh "å®ç°äº†èŠå¤©æ¶ˆæ¯åŠ å¯†åŠŸèƒ½"

# ç»§ç»­ä¸‹ä¸€ä¸ªåŠŸèƒ½
./git-backup.sh "æ·»åŠ äº†æ–‡ä»¶ä¸Šä¼ è¿›åº¦æ˜¾ç¤º"
```

**å¥½å¤„ï¼š** ç»†ç²’åº¦çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œæ–¹ä¾¿å›æº¯å’Œ cherry-pick

---

### 3. æ¯å¤©ç»“æŸå‰å¤‡ä»½

```bash
# ä¸‹ç­å‰æˆ–æ¯å¤©å·¥ä½œç»“æŸæ—¶
./git-backup.sh "$(date '+%Y-%m-%d') å·¥ä½œè¿›åº¦ä¿å­˜"

# æˆ–å¿«é€Ÿä¿å­˜
./quick-save.sh "$(date '+%Y-%m-%d') ä¸‹ç­å‰ä¿å­˜"
```

**å¥½å¤„ï¼š** ç¡®ä¿æ¯å¤©çš„å·¥ä½œéƒ½æœ‰è®°å½•

---

### 4. å®éªŒæ€§æ”¹åŠ¨ä½¿ç”¨ stash

```bash
# å¼€å§‹å®éªŒå‰
./quick-save.sh "å®éªŒå‰çŠ¶æ€"

# è¿›è¡Œå®éªŒæ€§æ”¹åŠ¨...
# å¦‚æœæˆåŠŸï¼Œè½¬ä¸ºæ­£å¼æäº¤
./git-backup.sh "å®éªŒæˆåŠŸï¼šæ–°çš„æ¶ˆæ¯æ¸²æŸ“æ–¹å¼"

# å¦‚æœå¤±è´¥ï¼Œæ¢å¤å®éªŒå‰çŠ¶æ€
git stash pop  # æ¢å¤
```

---

## ğŸ“š å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¼šä¿®å¤ Bug

```bash
# 1. ä¿å­˜å½“å‰è¿›åº¦
./quick-save.sh "å¼€å§‹ä¿®å¤ #123 bug"

# 2. ä¿®å¤ä»£ç 
# ç¼–è¾‘æ–‡ä»¶...

# 3. æµ‹è¯•é€šè¿‡åæäº¤
./git-backup.sh "ä¿®å¤: WebSocket é‡è¿é€»è¾‘é”™è¯¯ (#123)"
```

---

### åœºæ™¯ 2ï¼šå¼€å‘æ–°åŠŸèƒ½

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
git checkout -b feature/voice-call

# 2. ä¿å­˜èµ·ç‚¹
./quick-save.sh "å¼€å§‹è¯­éŸ³é€šè¯åŠŸèƒ½"

# 3. åˆ†æ­¥æäº¤
./git-backup.sh "å®ç°è¯­éŸ³é€šè¯ UI"
./git-backup.sh "é›†æˆ LiveKit SDK"
./git-backup.sh "æ·»åŠ éŸ³é¢‘æƒé™å¤„ç†"

# 4. å®Œæˆååˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge feature/voice-call
```

---

### åœºæ™¯ 3ï¼šä»£ç é‡æ„

```bash
# 1. ä¿å­˜é‡æ„å‰çš„çŠ¶æ€ï¼ˆé‡è¦ï¼ï¼‰
./git-backup.sh "é‡æ„å‰å¤‡ä»½: HackChatClient"

# 2. åˆ›å»ºä¿æŠ¤ç‚¹
./quick-save.sh "é‡æ„èµ·ç‚¹"

# 3. è¿›è¡Œé‡æ„
# ä¿®æ”¹æ–‡ä»¶ç»“æ„...

# 4. æµ‹è¯•é€šè¿‡åæäº¤
./git-backup.sh "é‡æ„: ç®€åŒ– WebSocket è¿æ¥é€»è¾‘"
```

---

### åœºæ™¯ 4ï¼šä¸´æ—¶åˆ‡æ¢ä»»åŠ¡

```bash
# å½“å‰åœ¨å¼€å‘åŠŸèƒ½ Aï¼Œçªç„¶éœ€è¦ä¿®å¤ç´§æ€¥ Bug

# 1. ä¿å­˜åŠŸèƒ½ A çš„è¿›åº¦
./quick-save.sh "åŠŸèƒ½ A å¼€å‘ä¸­"

# 2. åˆ‡æ¢åˆ†æ”¯æˆ–ä¿®å¤ Bug
git checkout main
# ä¿®å¤ bug...

# 3. æäº¤ä¿®å¤
./git-backup.sh "ç´§æ€¥ä¿®å¤: å´©æºƒé—®é¢˜"

# 4. æ¢å¤åŠŸèƒ½ A çš„è¿›åº¦
git stash list  # æ‰¾åˆ°ä¿å­˜ç‚¹
git stash apply stash@{0}
```

---

## ğŸ†˜ æ•…éšœæ¢å¤

### æƒ…å†µ 1ï¼šè¯¯åˆ æ–‡ä»¶ï¼ˆåˆšåˆšåˆ çš„ï¼‰

```bash
# æ–¹æ³• 1: ä» stash æ¢å¤ï¼ˆå¦‚æœä¹‹å‰ç”¨äº† quick-saveï¼‰
git stash list
git stash show -p stash@{0}  # æŸ¥çœ‹å†…å®¹
git stash pop

# æ–¹æ³• 2: ä»æœ€è¿‘çš„æäº¤æ¢å¤
git checkout HEAD -- HChat/Core/HackChatClient.swift

# æ–¹æ³• 3: ä»ç‰¹å®šæäº¤æ¢å¤
git log --oneline  # æ‰¾åˆ°æäº¤ hash
git checkout <commit-hash> -- HChat/Core/HackChatClient.swift
```

---

### æƒ…å†µ 2ï¼šæƒ³æ’¤é”€æœ€è¿‘çš„æ”¹åŠ¨

```bash
# ä¸¢å¼ƒå·¥ä½œåŒºæ‰€æœ‰æ”¹åŠ¨ï¼ˆå±é™©ï¼å…ˆ quick-saveï¼‰
git reset --hard HEAD

# åªæ’¤é”€æŸä¸ªæ–‡ä»¶
git checkout -- HChat/UI/ChatView.swift

# æ’¤é”€æœ€è¿‘ä¸€æ¬¡æäº¤ï¼ˆä½†ä¿ç•™æ”¹åŠ¨ï¼‰
git reset --soft HEAD^
```

---

### æƒ…å†µ 3ï¼šæäº¤äº†ä¸æƒ³è¦çš„æ”¹åŠ¨

```bash
# æ–¹æ³• 1: æ’¤é”€æœ€è¿‘ä¸€æ¬¡æäº¤
git reset --soft HEAD^  # ä¿ç•™æ”¹åŠ¨
git reset --hard HEAD^  # ä¸¢å¼ƒæ”¹åŠ¨

# æ–¹æ³• 2: åˆ›å»ºåå‘æäº¤ï¼ˆæ¨èç”¨äºå·²æ¨é€çš„æäº¤ï¼‰
git revert <commit-hash>
```

---

### æƒ…å†µ 4ï¼šæƒ³å›åˆ°æŸä¸ªå†å²ç‰ˆæœ¬

```bash
# æŸ¥çœ‹å†å²
git log --oneline --graph

# åˆ›å»ºæ–°åˆ†æ”¯ä»è¯¥ç‰ˆæœ¬å¼€å§‹
git checkout -b recovery-branch <commit-hash>

# æˆ–ç›´æ¥å›é€€ï¼ˆå±é™©ï¼ï¼‰
git reset --hard <commit-hash>
```

---

## ğŸ“Š æŸ¥çœ‹å†å²

### å›¾å½¢åŒ–æ—¥å¿—

```bash
# ç®€æ´å›¾å½¢
git log --oneline --graph --all

# è¯¦ç»†ä¿¡æ¯
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'
```

### æŸ¥çœ‹æ”¹åŠ¨

```bash
# æŸ¥çœ‹æŸæ¬¡æäº¤çš„æ”¹åŠ¨
git show <commit-hash>

# æ¯”è¾ƒä¸¤ä¸ªæäº¤
git diff <commit1> <commit2>

# æŸ¥çœ‹æ–‡ä»¶å†å²
git log --follow -- HChat/Core/HackChatClient.swift
```

---

## ğŸ”’ Git é…ç½®è¯´æ˜

### .gitignore è§„åˆ™

```
# ç‹¬ç«‹åç«¯ä»“åº“ï¼ˆä¸çº³å…¥ iOS é¡¹ç›® Gitï¼‰
HCChatBackEnd/

# Xcode ç”Ÿæˆæ–‡ä»¶
*.xcworkspace/xcshareddata/swiftpm/
xcuserdata/
DerivedData/

# macOS ç³»ç»Ÿæ–‡ä»¶
.DS_Store
```

### æ£€æŸ¥é…ç½®

```bash
# æŸ¥çœ‹å½“å‰å¿½ç•¥çš„æ–‡ä»¶
git status --ignored

# æ£€æŸ¥æŸä¸ªæ–‡ä»¶æ˜¯å¦è¢«å¿½ç•¥
git check-ignore -v HCChatBackEnd/docker-compose.yml
```

---

## ğŸŒ è¿œç¨‹æ¨é€

### æ¨é€åˆ° GitHub

```bash
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main

# å¼ºåˆ¶æ¨é€ï¼ˆå±é™©ï¼ç¡®ä¿çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼‰
git push --force origin main

# æ¨é€æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾
git push --all origin
```

### è®¾ç½®è¿œç¨‹ä»“åº“

```bash
# æŸ¥çœ‹è¿œç¨‹ä»“åº“
git remote -v

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin git@github.com:yourusername/HChat.git

# æ›´æ”¹è¿œç¨‹ URL
git remote set-url origin git@github.com:yourusername/HChat.git
```

---

## âš™ï¸ è‡ªåŠ¨åŒ–é…ç½®

### æ·»åŠ  Git Aliasï¼ˆå¯é€‰ï¼‰

ç¼–è¾‘ `~/.gitconfig` æ·»åŠ ï¼š

```ini
[alias]
    # å¿«æ·å‘½ä»¤
    st = status --short
    co = checkout
    br = branch
    ci = commit
    
    # ç¾åŒ–æ—¥å¿—
    lg = log --oneline --graph --all --decorate
    
    # æŸ¥çœ‹æ”¹åŠ¨
    d = diff
    ds = diff --staged
    
    # æ’¤é”€
    undo = reset --soft HEAD^
    unstage = reset HEAD --
```

ä½¿ç”¨ï¼š
```bash
git st        # ç­‰åŒäº git status --short
git lg        # ç¾åŒ–çš„æ—¥å¿—
git undo      # æ’¤é”€æœ€è¿‘æäº¤
```

---

## ğŸ’¡ æç¤ºå’ŒæŠ€å·§

### 1. å®šæœŸæŸ¥çœ‹çŠ¶æ€

```bash
# å…»æˆä¹ æƒ¯ï¼šç»å¸¸æŸ¥çœ‹å½“å‰çŠ¶æ€
git status

# æˆ–ä½¿ç”¨å·¥å…·è„šæœ¬
./git-backup.sh  # ä¼šå…ˆæ˜¾ç¤ºçŠ¶æ€
```

### 2. æäº¤ä¿¡æ¯è§„èŒƒ

æ¨èæ ¼å¼ï¼š
```
ç±»å‹: ç®€çŸ­æè¿°

è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰
```

ç±»å‹ï¼š
- `âœ¨ æ–°å¢`: æ–°åŠŸèƒ½
- `ğŸ› ä¿®å¤`: Bug ä¿®å¤
- `â™»ï¸ é‡æ„`: ä»£ç é‡æ„
- `ğŸ“ æ–‡æ¡£`: æ–‡æ¡£æ›´æ–°
- `ğŸ¨ æ ·å¼`: UI/æ ·å¼è°ƒæ•´
- `âš¡ï¸ æ€§èƒ½`: æ€§èƒ½ä¼˜åŒ–
- `âœ… æµ‹è¯•`: æ·»åŠ æµ‹è¯•
- `ğŸ”§ é…ç½®`: é…ç½®æ–‡ä»¶ä¿®æ”¹

ç¤ºä¾‹ï¼š
```bash
./git-backup.sh "âœ¨ æ–°å¢: è¯­éŸ³æ¶ˆæ¯å½•åˆ¶åŠŸèƒ½"
./git-backup.sh "ğŸ› ä¿®å¤: WebSocket é‡è¿å¤±è´¥é—®é¢˜ (#123)"
```

### 3. ä½¿ç”¨åˆ†æ”¯éš”ç¦»é£é™©

```bash
# å¼€å‘æ–°åŠŸèƒ½æ—¶åˆ›å»ºåˆ†æ”¯
git checkout -b feature/new-ui

# æµ‹è¯•é€šè¿‡ååˆå¹¶
git checkout main
git merge feature/new-ui

# åˆ é™¤åˆ†æ”¯
git branch -d feature/new-ui
```

---

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹å·¥å…·å¸®åŠ©ï¼š`./git-backup.sh --help`ï¼ˆå¦‚æœ‰å®ç°ï¼‰
- Git æ–‡æ¡£ï¼š`git help <command>`
- åœ¨çº¿èµ„æºï¼šhttps://git-scm.com/doc

---

**è®°ä½ï¼šç»å¸¸å¤‡ä»½ï¼Œå°æ­¥æäº¤ï¼Œæ°¸ä¸ä¸¢å¤±ï¼** ğŸš€

